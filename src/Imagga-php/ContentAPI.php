<?php
/**
 *  Copyright 2011 Wordnik, Inc.
 *
 *  Licensed under the Apache License, Version 2.0 (the "License");
 *  you may not use this file except in compliance with the License.
 *  You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 *  Unless required by applicable law or agreed to in writing, software
 *  distributed under the License is distributed on an "AS IS" BASIS,
 *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 *  See the License for the specific language governing permissions and
 *  limitations under the License.
 *
 * @package default
 */


/**
 * NOTE: This class is auto generated by the swagger code generator program. Do not edit the class manually.
 */

/**
 * source code generated by http://restunited.com using Swagger Codegen
 * for any feedback/issue, please send to feedback{at}restunited.com
 *
 * swagger-codegen: https://github.com/wordnik/swagger-codegen
 */
namespace Sexyoung\ImaggaLaravel;

class ContentAPI {


	/**
	 *
	 * @param unknown $apiClient
	 */
	function __construct($apiClient) {
		$this->apiClient = $apiClient;
	}


	/**
	 * upload
	 * Upload an image file to the API and get content id for processing it using one of the other endpoint methods.
	 * Upload an image file to the API and get content id for processing it using one of the other endpoint method.
	 *
	 * @param File    $image: image (required)
	 * @return UploadsResponse
	 */
	public function upload($image) {

		//parse inputs
		$resourcePath = "/content";
		//comment: no longer support format
		//$resourcePath = str_replace("{format}", "json", $resourcePath);
		$method = "POST";
		$queryParams = array();
		$headerParams = array();
		$_header_accept = array('application/json');
		$headerParams['Accept'] = count($_header_accept) > 0 ? $_header_accept[0] : 'application/json';
		$_header_content_type = array('multipart/form-data');
		$headerParams['Content-Type'] = count($_header_content_type) > 0 ? $_header_content_type[0] : 'application/json';

		//make the API Call
		if (! isset($body)) {
			$body = null;
		}

		//form parameter
		$formParameters = array();
		// upload file
		$filename = basename($image);
		$mime_type = $this->apiClient->getFileMimeType($image);
		$formParameters["image"] = "@$image;type=$mime_type;filename=$filename";
		if (count($formParameters) > 0) {
			$body = $formParameters;
		}

		// authentication setting
		$require_auth = TRUE;

		$response = $this->apiClient->callAPI($resourcePath, $method,
			$queryParams, $body,
			$headerParams, $require_auth);


		if (! $response) {
			return null;
		}

		$responseObject = $this->apiClient->deserialize($response,
			'UploadsResponse');
		return $responseObject;
	}


}
